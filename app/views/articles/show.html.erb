<div class="container-fluid" style="max-width: 800px; padding-top: 20px">
  <div class="d-flex flex-column" style="padding-top: 10px">
    <div class="date-sm pb-2">
      <%=raw tag_buttons(@article.all_tags) %>
    </div>
    <div class="d-flex justify-content-left align-items-center">
      <div class="article-title">
        <%= @article.title %>
      </div>
      <div class="bookmarking p-2">
        <%= render 'layouts/bookmark', article: @article %>
      </div>
      <div class="date">
        <% if user_signed_in? and current_user.id == @article.user_id and current_user.admin? %>
            <%= link_to 'Edit', edit_article_path(@article), class: "btn btn-sm btn-outline-primary p-1 m-1" %>
            <%= link_to 'Delete', article_path(@article), class: "btn btn-sm btn-outline-danger p-1 m-1", method: :delete, data: { confirm: 'Are you sure?' } %>       
        <% end %>
      </div>
    </div>
    <div class="article-subtitle">
      <%= @article.sub_title %>
    </div>
    <div class="d-flex flex-row align-items-center pb-2">
      <i class="far fa-clock text-muted">&nbsp</i>
      <div class="article-date"><%= @article.created_at.strftime("%B %d, %Y") %>&nbsp&nbsp|&nbsp</div>
      <div class="voting d-flex align-items-center">
        <%= render 'layouts/upvotes' %>
      </div>
      <div class="d-flex align-items-center">
        <i class="mdi mdi-comment-text-outline md-24 grey p-1" data-toggle="tooltip" data-placement="top" title="Comments"></i>
        <%= comment_count(@article) %> |
      </div>
      <% if @article.find_votes_for(vote_scope: 'praise').size > 0 %>
        &nbspQR:&nbsp<%= rating(@article) %> &nbsp%
        <%= certificate(@article) %>
      <% end %>
    </div> 
    
    <div class="d-flex align-items-center">
      <%= render 'author' %> <!-- modal rendering the avatar, the name, workplace and follow button of the author -->
    </div>
    <div class="article-body">
      <%= @article.body.html_safe %>
    </div>
  </div>
  
  <div class="d-flex justify-content-center date pb-3 pt-3">
    <%=raw tag_buttons(@article.all_tags) %>
  </div>
  
  <div class="d-flex flex-row justify-content-center align-items-center pb-3 pt-3" style="border-bottom: 1px solid Lavender; border-top: 1px solid Lavender">
    <div class="voting d-flex align-items-center">
      <div class="author-sm">Think this quality content? Please rate this article:&nbsp&nbsp</div>
      <%= render 'voting', article: @article %>
    </div>
  </div>
  <div class="align-items-center pt-3">
    <%= render 'users/profile', user: @user %> <!-- modal rendering the avatar, the name, workplace and follow button of the author -->
  </div>
</div>

<br>

<section class="container-fluid pt-4" style="background: #FAFAFA">
  <div class="d-flex mx-auto" style="max-width: 1400px; overflow: auto">
    <% Article.order('cached_scoped_praise_votes_total + comments_count DESC').first(3).each do |article| %>
      <div class="col-lg-4 pb-2">
        <%= render 'layouts/vcard_trending', article: article %>    
      </div>
    <% end %>
  </div>
</section>

<section class="container-fluid pt-4" style="background: #FAFAFA" >
  <div class="row justify-content-center p-0">
    <div class="container" style="width: 800px">
      <% if user_signed_in? %>
        <%= render 'form_comment' %>
      <% end %>
      <br>
      <div class="form-inline">
        <i class="material-icons md-36 p-1">comment</i><div class="section-title-sm"><%= "Comment".pluralize(comment_count(@article))%>&nbsp(<%= comment_count(@article) %>)</div> 
      </div>
      <%= render(partial: 'comments/comment', collection: @article.comments) %>
     </div>
  </div>
</section>