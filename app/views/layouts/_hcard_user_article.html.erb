<div class="card mb-2">
  <div class="row">
    <div class="col-sm-4 p-0">
    <%= link_to image_tag("//placehold.it/720x350", class:"thumb-category img-fluid"), article_path(article) %>
    </div>
  <div class="col-sm-8">
    <div class="d-flex justify-content-between align-items-end">
      <small class="text-muted pl-2 pt-2">
        <%= article.created_at.strftime("%B %d, %Y") %> -
        <% cat_icon = category_icon(Category.find(article.category_id).name) %>
        <% cat_icon_color = category_icon_color(Category.find(article.category_id).name) %>
        <i class="<%= cat_icon %>" style="color:<%= cat_icon_color %>"></i>
        <%= link_to Category.find(article.category_id).name, category_path(article.category_id) %>
      </small>
      <div class="bm-icon-cat bookmarking"> <!-- "bookmarking" is used as a marker for the like/unlike.js files -->
        <% if user_signed_in? %>
          <% if current_user.liked? article, vote_scope: "bookmark" %>
            <%= link_to unbookmark_article_path(article), remote: true, id: "unlike_#{article.id}", data: {toggle:"tooltip", placement:"top"}, title:"Unbookmark article", method: :put do %>
              <i class="material-icons">bookmark</i>
            <% end %>
          <% else %>
            <%= link_to bookmark_article_path(article), remote: true, id: "like_#{article.id}", data: {toggle:"tooltip", placement:"top"}, title:"Bookmark article", method: :put do %>
              <i class="material-icons">bookmark_border</i>
            <% end %>
          <% end %>
        <% else %>
          <%= link_to "", data: {toggle: "modal", target: "#modalSignup"} do %>
            <i class="material-icons">bookmark_border</i>
          <% end %>
          <%= render 'layouts/modal_signup' %>
        <% end %>
      </div>    
    </div>  
    <div class="d-flex flex-column p-2">
      <%= link_to article_path(article), class: "card-link" do %>
        <div class="card-title"><%= article.title %></div>
        <div class="card-subtitle"><%= article.sub_title %></div>
      <% end %>
    </div>
    <div class="card-article-body p-2 mb-4">
      <%= truncate strip_tags(article.body), length: 250 %>
      <%= link_to 'Read more', article_path(article) %> 
    </div>
    <div class="form-inline">
      <div class="d-flex flex-row mt-auto ml-auto p-2">
        <div class="">
          <i class="fas fa-heart"></i>
          <small class="pr-2 vote-count"><%= article.find_votes_for(:vote_scope => 'praise').size.to_s %></small>
        </div>
        <div class="">
          <i class="fas fa-comment-alt"></i>
          <small class="pr-2 vote-count"><%= comment_count(article) %></small>
        </div> 
      </div>
    </div>          
  </div>
</div>
</div>