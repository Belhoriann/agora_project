<% if user_signed_in? && current_user.admin? %>
<section class="container-fluid"> 

  <h1>All Articles</h1>
  
  <body>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Article id</th>
        <th>Title</th>
        <th>Author</th>
        <th colspan="3"></th>
      </tr>
    </thead>
  
    <tbody>
      <% @articles.each do |article| %>
        <tr>
          <td><%= article.id %></td>
          <td><%= article.title %></td>
          <td><%= article.author %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <h1>All Bookmarks</h1>
  
  <body>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Article id</th>
        <th>Title</th>
        <th>Author</th>
        <th>BM by</th>
        <th>UV by</th>
        <th colspan="10"></th>
      </tr>
    </thead>
  
    <tbody>
      <% @articles.each do |article| %>
        <% @users.each do |user| %>
          <% if user.liked? article, vote_scope: 'bookmark' %>
          <tr>
            <td><%= article.id %></td>
            <td><%= article.title %></td>
            <td><%= article.author %></td>
            <td><%= article.votes_for(vote_scope: 'bookmark').by_type(User).voters[0].full_name %></td>
            <td><%= article.votes_for(vote_scope: 'upvote').by_type(User).voters[0].full_name %></td>
            <td><%= link_to 'Destroy', unbookmark_article_path(article), method: :put, data: { confirm: 'Are you sure?' } %></td>
          </tr>
          <% end %>
        <% end %>
      <% end %>
    </tbody>
  </table>
  
  <h1>All Users</h1>
  
  <body>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>name</th>
        <th>Mail</th>
        <th>Job</th>
        <th>WP</th>
        <th colspan="3"></th>
      </tr>
    </thead>
  
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td><%= user.full_name %></td>
          <td><%= user.email %></td>
          <td><%= user.headline %></td>
          <td><%= user.work_place %></td>
          <td><%= user.admin %></td>
          <td><% if user.admin == false %>
                <%= button_to "Make Admin", {controller: "users", action: "make_admin", id: user.id }, method: :put %>
              <% else %>
                <%= button_to "Remove Admin", {controller: "users", action: "remove_admin", id: user.id }, method: :put %>
              <% end %>
          </td>
          <td><%= link_to 'Show', user_path(user, full_name: user.full_name) %></td>
          <td><%= link_to 'Edit', edit_user_registration_path(user) %></td>
          <td><%= link_to 'Destroy', registration_path(user), method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
</section>